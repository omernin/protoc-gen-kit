# DO NOT USE CURRENTLY UNDER DEVELOPMENT

# protoc-gen-kit

This is a fork of protoc-gen-micro. Inspired by go-micro we are using code generation to reduce go-kit boilerplate code.

## Install

```bash
go get github.com/serkangunes/protoc-gen-kit
```

Also required:

- [protoc](https://github.com/google/protobuf)
- [protoc-gen-go](https://github.com/golang/protobuf)
- [go-kit](github.com/go-kit/kit)
- [oklog](github.com/oklog/oklog)
- [prometheus-client](github.com/prometheus/client_golang)
- [gRpc](google.golang.org/grpc)

## Usage

Define your service as `greeter.proto`

```proto
syntax = "proto3";

service Greeter {
    rpc Hello(Request) returns (Response) {}
}

message Request {
    string name = 1;
}

message Response {
    string msg = 1;
}
```

Generate the code

```bash
protoc --proto_path=$GOPATH/src:. --kit_out=. --go_out=. greeter.proto
```

Your output result should be:

```bash
./
    greeter.proto   # original protobuf file
    greeter.pb.go   # auto-generated by protoc-gen-go
    greeter.kit.go  # auto-generated by protoc-gen-kit
```

The kit generated code includes grpc transport, service endpoint and common middleware.

### Errors

If you see an error about `protoc-gen-kit` not being found or executable, it's likely your environment may not be configured correctly. If you've already installed `protoc`, `protoc-gen-go`, and `protoc-gen-kit` ensure you've included `$GOPATH/bin` in your `PATH`.

Alternative specify the Go plugin paths as arguments to the `protoc` command

```bash
protoc --plugin=protoc-gen-go=$GOPATH/bin/protoc-gen-go --plugin=protoc-gen-kit=$GOPATH/bin/protoc-gen-kit --proto_path=$GOPATH/src:. --micro_out=. --go_out=. greeter.proto
```

## LICENSE

protoc-gen-kit is a liberal reuse of protoc-gen-go hence we maintain the original license
